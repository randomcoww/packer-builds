preseed debian-installer/locale string en_US
# set in packer config
#preseed time/zone string Etc/UTC
preseed console-setup/ask_detect boolean false
preseed keyboard-configuration/layoutcode string us
preseed netcfg/choose_interface select auto
preseed netcfg/get_hostname string unassigned-hostname
preseed netcfg/get_domain string unassigned-domain

preseed mirror/country string manual
preseed mirror/http/hostname string archive.ubuntu.com
preseed mirror/http/directory string /ubuntu
preseed mirror/http/proxy string
preseed clock-setup/utc boolean true
preseed clock-setup/ntp boolean true

preseed partman-auto/method string lvm
preseed partman-lvm/device_remove_lvm boolean true
preseed partman-md/device_remove_md boolean true
preseed partman-lvm/confirm boolean true
preseed partman-lvm/confirm_nooverwrite boolean true
preseed partman-auto-lvm/guided_size string 50%
preseed partman-auto/choose_recipe select atomic
preseed partman/default_filesystem string xfs
preseed partman-partitioning/confirm_write_new_label boolean true
preseed partman/choose_partition select finish
preseed partman/confirm boolean true
preseed partman/confirm_nooverwrite boolean true
preseed partman-md/confirm boolean true
preseed partman-partitioning/confirm_write_new_label boolean true
preseed partman/choose_partition select finish
preseed partman/confirm boolean true
preseed partman/confirm_nooverwrite boolean true

# set in packer config
#preseed passwd/user-fullname string username
#preseed passwd/username string username
#preseed passwd/user-password password password
#preseed passwd/user-password-again password password

preseed user-setup/allow-password-weak boolean true
preseed user-setup/encrypt-home boolean false

# optional tasksel
#tasksel tasksel/first multiselect server

preseed pkgsel/include string openssh-server vim
preseed pkgsel/update-policy select unattended-upgrades
popularity-contest popularity-contest/participate boolean false

preseed grub-installer/only_debian boolean true
preseed grub-installer/with_other_os boolean true

preseed finish-install/reboot_in_progress note

# can't get preseed commands to work.. use kickstart commands
%post

# allow serial console login
cat > /etc/init/ttyS0.conf <<EOF
start on stopped rc or RUNLEVEL=[12345]
stop on runlevel [!12345]

respawn
exec /sbin/getty -L 115200 ttyS0 vt102
EOF

# cleanup
apt-get -y remove nano
apt-get -qq -y autoremove
apt-get clean
rm -rf /var/cache/apt/*cache.bin
rm -rf /var/lib/apt/lists/*

# packer provisioning key
mkdir /root/.ssh
echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCz7aE4GO4E+Aken6TFMPtAmVIP7Br0HJo9PyHGhT4uArPwBxAC2omahFFYpw0mzKTpiBniL9IEBb05l9fo+LYl12EvpF9/a34l4pjAKIhzA+7WLPEkOyyA/Z10jDWCJFwvp3BqVAMHQE7O9FJyJMeiPWnrKg/OLjZDEnDAEgSoHXHOy9JNfIKcUKq/bf7xAAsl80ixOp57Q4DMph5fixIgnH5Oy9glZFAyOeF5tMy157G+9BLfipnXiAJU19p/aVpFgfDNNknqLA3rBIlmaz+FK31/TYWBNVILC9fHeyXRidGf6FtEvcZ4d0WQlgxOptPWQdAy5Tnuc6D7Azx0u66z" >> /root/.ssh/authorized_keys
